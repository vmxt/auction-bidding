<div class="col-12">
	
	<h5 class="bg-secondary text-light p-3">Business line or Industry</h5>
    <div class="row">

        <div class="col-md-6">
            <div class="row">

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="aerospace" id="aerospace" name="business_line[]" data-parent="business line" data-field="aerospace">
                        <label class="form-check-label" for="aerospace">
                            aerospace industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="transport" id="transport" name="business_line[]" data-parent="business line" data-field="transport">
                        <label class="form-check-label" for="transport">
                            transport industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="computer" id="computer" name="business_line[]" data-parent="business line" data-field="computer">
                        <label class="form-check-label" for="computer">
                            computer industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="telecommunication" id="telecommunication" name="business_line[]" data-parent="business line" data-field="telecommunication">
                        <label class="form-check-label" for="telecommunication">
                            telecommunication industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="agriculture" id="agriculture" name="business_line[]" data-parent="business line" data-field="agriculture">
                        <label class="form-check-label" for="agriculture">
                            agriculture industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="construction" id="construction" name="business_line[]" data-parent="business line" data-field="construction">
                        <label class="form-check-label" for="construction">
                            construction industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="education" id="education" name="business_line[]" data-parent="business line" data-field="education">
                        <label class="form-check-label" for="education">
                            education industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="pharmaceutical" id="pharmaceutical" name="business_line[]" data-parent="business line" data-field="pharmaceutical">
                        <label class="form-check-label" for="pharmaceutical">
                            pharmaceutical industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="food" id="food" name="business_line[]" data-parent="business line" data-field="food">
                        <label class="form-check-label" for="food">
                            food industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="health care" id="health_care" name="business_line[]" data-parent="business line" data-field="health care">
                        <label class="form-check-label" for="health_care">
                            health care industry
                        </label>
                    </div>
                </div>

            </div>
        </div>

        <div class="col-md-6">
            <div class="row">

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="hospital" id="hospital" name="business_line[]" data-parent="business line" data-field="hospital">
                        <label class="form-check-label" for="hospital">
                            hospital industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="entertainment" id="entertainment" name="business_line[]" data-parent="business line" data-field="entertainment">
                        <label class="form-check-label" for="entertainment">
                            entertainment industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="news media" id="news_media" name="business_line[]" data-parent="business line" data-field="news media">
                        <label class="form-check-label" for="news_media">
                            news media industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="energy" id="energy" name="business_line[]" data-parent="business line" data-field="energy">
                        <label class="form-check-label" for="energy">
                            energy industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="manufacturing" id="manufacturing" name="business_line[]" data-parent="business line" data-field="manufacturing">
                        <label class="form-check-label" for="manufacturing">
                            manufacturing industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="music" id="music" name="business_line[]" data-parent="business line" data-field="music">
                        <label class="form-check-label" for="music">
                            music industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="mining" id="mining" name="business_line[]" data-parent="business line" data-field="mining">
                        <label class="form-check-label" for="mining">
                            mining industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="world wide web" id="world_wide_web" name="business_line[]" data-parent="business line" data-field="world wide web">
                        <label class="form-check-label" for="world_wide_web">
                            world wide web industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="electronic" id="electronic" name="business_line[]" data-parent="business line" data-field="electronic">
                        <label class="form-check-label" for="electronic">
                            electronic industry
                        </label>
                    </div>
                </div>

                <div class="col-12 form-group">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input form-services bli business_lines_input" type="checkbox" value="others" id="business_line_others" name="business_line[]" data-parent="business line" data-field="others" onclick="myFunction()">
                        <label class="form-check-label" for="business_line_others">
                            Others, please specify
                        </label>
                    </div>

                    <div id="business_line_others_field_wrap" style="display:none; margin-top: 5px;">
                        <div class="business_line_others_field_wrapper">
                            <div class="row">
                                <div class="col-8">
                                    <input type="text" id="business_line_others_otherss" class="business_line_others_othersss form-control" data-field="others">
                                </div>
                            </div>
                        </div>
                        <a href="javascript:void(0);" class="bli_others_add_button btn btn-success mt-2" title="Add field">Add <i class="icon-plus-circle"></i></a>
                    </div>

                </div>

            </div>
        </div>

    </div>
	
</div>

<script type="text/javascript">
    
    var js_supplier_bli = {!! $data !!};
    sections.business_lines = js_supplier_bli;
    _sections.business_lines = {};
    var business_lines = [];
    var bli_ctr = 0;

    var bli_maxField = 10; //Input fields increment limitation
    var bli_addButton = $('.bli_others_add_button'); //Add button selector
    var bli_wrapper = $('.business_line_others_field_wrapper'); //Input field wrapper

    var bli_x = bli_ctr.length > 0 ? bli_ctr.length : 1; //Initial field counter is 1
    //Once add button is clicked
    $(bli_addButton).click(function(){
        //Check maximum number of input fields
        if(bli_x < bli_maxField){ 
            var bli_fieldHTML  = '<div class="row" style="margin-top:15px;">';
                bli_fieldHTML += '<div class="col-8">';
                bli_fieldHTML += '<input type="text" class="business_line_others_othersss form-control" data-field="others" data-action="update">';
                bli_fieldHTML += '</div><a href="javascript:void(0);" class="bli_remove_button btn btn-danger" Remove="Add field" data-action="">';
                bli_fieldHTML += '<i class="icon-minus-circle"></i></a></div>';
            bli_x++; //Increment field counter
            $(bli_wrapper).append(bli_fieldHTML); //Add field html
        }
    });

    function myFunction() {
        var bloi = document.getElementById("business_line_others");
        var bloi_wrap = document.getElementById("business_line_others_field_wrap");
        if (bloi.checked == true){
            bloi_wrap.style.display = "block";
        } else {
            bloi_wrap.style.display = "none";
        } 
    }


    if(js_supplier_bli.length>0){
        
        $.each(js_supplier_bli, function(key, val) {

            let service_type = val.type.replaceAll(" ","_").toLowerCase();  
            let service_name = val.name.replaceAll(" ","_").toLowerCase();

            if(val.type == 'others') {
                if($('#business_line_others'+':checked').length == 0) $('#business_line_others').click();

                if(bli_ctr == 0) {
                    $('#business_line_others_otherss').val(val.name);
                } else {
                    var bli_fieldHTML  = '<div class="row" style="margin-top:15px;">';
                        bli_fieldHTML += '<div class="col-8">';
                        bli_fieldHTML += '<input type="text" class="business_line_others_othersss form-control" value="'+val.name+'" data-field="others">';
                        bli_fieldHTML += '</div><a href="javascript:void(0);" class="bli_remove_button btn btn-danger" title="Remove field" data-action="remove">';
                        bli_fieldHTML += '<i class="icon-minus-circle"></i></a></div>';

                        $('.business_line_others_field_wrapper').append(bli_fieldHTML);
                }
                bli_ctr++;
            } else {
                $('#'+service_name).prop('checked','checked');
            }
            
        });
    }

    // $(document).on('change' , '.business_line_others_othersss', function () {

    //     var _that           = this;
    //     var name            = $(_that).val();
    //     var is_existing     = false;
    //     var field           = $(_that).data('field');
            
    //     business_lines.push({
    //         'name'    : name , 
    //         'type'    : field , 
    //         'action'  : 'update'
    //     });

    //     data.business_lines = business_lines;


    // });

    // $(document).on('click', '.bli_remove_button', function () {

    //     var action = $(this).data('action');

    //     if(action == 'remove') {

    //         business_lines.push({
    //             'name'    : $(this).siblings().children().val() , 
    //             'type'    : 'others' , 
    //             'action'  : 'remove'
    //         });

    //         data.business_lines = business_lines;

    //     }

    //     $(this).parent('div').remove(); //Remove field html
    //     bli_x--;

    // });

    function newBusiness_lines() {

        business_lines = [];

        $('.business_lines_input').each(function (key, val){

            var _that           = this;
            var name            = $(_that).val();
            var is_existing     = false;
            var field           = $(_that).data('field');
                
            $.each(js_supplier_bli, function(k,v){

                if( v.name == name && v.type == field ) is_existing = true;

            });

            if( $(_that).prop("checked") ) {

                if( !is_existing && field != 'others' ) {
                    business_lines.push({
                        'name'    : name , 
                        'type'    : field , 
                        'action'  : "new"
                    });
                }

            } else {

                if( is_existing ) {
                    if( field != 'others' ) {
                        business_lines.push({
                            'name'    : name , 
                            'type'    : field , 
                            'action'  : "remove"
                        });
                    } else {
                        business_lines.push({
                            'name'    : name , 
                            'type'    : field , 
                            'action'  : "remove"
                        });
                    }
                }
                
            }

            _sections.business_lines = business_lines;
            
        });

    }

</script>